### EC2 利用に発生する料金

- [インスタンスの購入方法](#インスタンスの購入方法)

- インスタンスの起動時間

- インスタンスのデータ転送料金
    - 基本的にインスタンスが受信するデータ量には料金は発生しない

    - 基本的にインスタンスが送信データ量に応じて課金が発生する

    - 同じ AZ 内の　Amazon EC2、Amazon RDS、Amazon Redshift、Amazon ElastiCache などのインスタンスとのデータの送受信には料金は発生しない 

- パブリック IP アドレスに対して発生する料金
    - Elastic IP でも　自動割り当てIPアドレスでも利用料金が発生するようになった
    - 1時間あたり 0.005USD → 1ヶ月あたり 500円ぐらい

<br>
<br>

参考サイト

[Amazon EC2 オンデマンド料金](https://aws.amazon.com/jp/ec2/pricing/on-demand/)

[EC2に関わるデータ転送料金(IN/OUT)を図にしてみた](https://iret.media/94)

---

### インスタンスの購入方法

- オンデマンドインスタンス
    - 一般的なインスタンスの購入方法
    - 使用した分だけ料金を払う

<br>

- [リザーブドインスタンス](./EC2_RI.md)

    - (OS/インスタンスタイプ等の)インスタンスの条件と利用期間を指定することで割引が適用される購入方法

    - **条件を指定するが、その条件通りのインスタンスを購入するのではない**

        → 購入時の条件に一致したインスタンスがあれば自動で割引が適用される

    - リザーブドインスタンスには `スタンダードクラス` と `コンバーティブルクラス` の２種類の[クラスタイプ](./EC2_RI.md#2種類のクラス)がある
     
<br>

- [スポットインスタンス](./EC2_Spot-Instances.md)

    - データセンターの物理マシンのメモリに空きがあれば、それを利用することで割引を受けることができる購入方法

        - メモリに大きい空きがあれば割引率が高くなり、空きが少なければ割引率が低くなる

            → 常に一定の割引料金で購入できるわけではない

            → 購入時は割引率が高くても、運用していくうちに対象のインスタンスが起動している物理マシンのメモリの空きが少なくなれば、割引率は下がっていく


    - 物理マシンのメモリに空きがなくなってくると、AWS によって中断されることがある

    - $\color{red}中断されてもいい処理を動かしたり、中断されてもサービスを提供し続けられるような手段を確保する必要がある$

<br>

- [Savings Plans]

    - インスタンスの1時間あたりの使用料金を指定することで割引が適用される購入方法

    - リザーブドインスタンスと同様に1年または3年という期間の縛りがある

    - リザーブドインスタンスとは異なり $\color{red}インスタンスタイプやOSなどのインスタンスの条件$ は指定しない

    - **条件(1時間あたりの利用料金)を指定するが、その条件通りのインスタンスを購入するのではない**

        → 購入時の条件に一致したインスタンスがあれば自動で割引が適用される
    
    - Savings Plans には `Compute SP` と `EC2 Instance SP` の2つの[タイプ](./EC2_Savings-Plans.md#sp-のタイプ)がある (もう1つタイプがあるが、それは EC2 を対象としないので除外している)

<br>
<br>

参考サイト

リザーブドインスタンスと Saving Planについての説明動画
- [RI /SP のギモン、解消します！#devio2021](https://www.youtube.com/watch?v=GFAy2Glqj88)

Savings Plans について
- [【徹底解説】AWSコスト削減、Savings Plansとは（第1回）](https://www.sunnycloud.jp/column/20220427-01/)


