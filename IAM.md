### IAM とは

- Identity and Access Management

- AWS のリソース(サービスのエンティティ)へのアクセス権限を管理するためのサービス

    - アクセス権限をユーザー/グループ/インスタンスに付与することができる

<br>

- ルートユーザーは全てのサービスにアクセスできるが、そのユーザーが乗っ取られると大変なことになってしまう

    -> 特定のリソースにのみアクセスできるユーザーを作成し、そのユーザーでリソースを運用していくことで乗っ取られた場合でも最小限の被害で済む

---

### ユーザーとグループ

root ユーザーが個別にユーザーを作成し、その都度個別に権限を設定することもできるが、めんどくさいしミスも起きる可能性が高い

root ユーザーがグループを作成し、そのグループに権限を与えることで、そのグループに属するユーザーは自動的にそのグループの権限が設定される

<img src="./img/IMA-group.png" />

---

### IAM のベストプラクティス

- root ユーザーはその権限でしかできないこと以外に利用しない

- root ユーザーの[アクセスキー](#access-key)は生成しない

- アクセスキーは極力使わない

- root ユーザーの [MFA](./Terminology.md) を有効化
    - root ユーザーでログインし、 MFA を有効化、その際に表示される QR コードをスマホアプリの Authenticator で読み込む

- 権限を付与した IAMグループにIAMユーザを所属させることで権限を付与する

- ReadOnlyAccess より強い権限を持つIAMユーザには、MFAを適用する

- IAM ユーザーをチーム内で使い回さない

- 不要な IAM ユーザーは定期的に削除する

---
<div id="access-key"></div>

### Access key

アクセスキーとは $\color{red}\text{AWS のサービスを web コンソールからのログインなしに利用できるようになる認証情報のこと}$

root ユーザーのアクセスキーが漏洩すると、悪意のあるプログラムからサーバーを大量に立てられ、仮想通貨のマイニングなどに利用されてしまう

---

### ポリシーとロール

- IAM Policy
    - リソースへのアクセス権限

    - **「どの AWS サービスの」**、**「どのリソースに対して」**、**「どんな操作を」**、**「許可or拒否」** を定義したもの 

- IAM Role
    - AWS インスタンスや、**他 AWS アカウント** に対して付与する権限
