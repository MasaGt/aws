### CDK のテスト方法

- CDK プロジェクトをテストには以下の種類がある

    - #### [Snapshot Test](./AWS_CDK_Snapshot_Test.md)

        - CDK プロジェクトが前回生成したテンプレートファイル (ベースラインテンプレート) と、今回生成するテンプレートファイルの差分を比較するテスト

            - 差分が検出されると、テストは失敗となる

        <br>

        - ★最初のテストは必ず成功する → 比較対象となるベースラインテンプレートがないため

        <br>

        - ★★Snapshot テストの結果の判断は人間が行う

            - 意図した変更 (差分が出るべき) が検出された場合 (= Snapshot テストとしては失敗) 、それは正しいテスト結果として受け入れる

            <br>

            - 逆に、差分が出るべき修正のテストで差分が検出されなかった場合  (= Snapshot テストとしては成功) 、それは正しくないテスト結果として判断する必要がある

            <br>

            - あくまで Snapshot テストは生成されたテンプレートの差分を検出するためだけのテストなので、その結果が正か否かを判断するのは人間
    
    <br>

    - #### [Fine-grained Assertions Test](./AWS_CDK_Fine-grained_Assertion_Test.md)

        - 生成されるテンプレートに対して、以下のような詳細なテストが行える

            - 「このスタックに ~~ というリソースがあるかどうか」

            <br>

            - 「このスタックの、このリソースは ~~ というプロパティを持つかどうか」

            <br>

            - 「このスタックの、このリソースの、このプロパティの値は ~~ かどうか」
        
        <br>

        - テンプレートの一部に対しても Fine-grained assertions Test をお行うことができるので、テスト駆動開発などで利用することもできる

    <br>

    - #### Validation Test

        - プログラム側で実行したバリデーション機能が正しく機能しているかのテスト

        - プログラム側でバリデーション処理を行っていなければ、バリデーションのテストは不要

    <br>

    - #### Integration Test

        - AWS CDKで定義したインフラストラクチャコードを実際にAWS環境にデプロイし、その動作を検証する自動化されたテストのこと

<br>
<br>

参考サイト

[aws DevAx connect CDKテスト入門](https://pages.awscloud.com/rs/112-TZM-766/images/CDKでもテストがしたい.pdf)

[AWS CDK アプリケーションのテスト](https://docs.aws.amazon.com/ja_jp/cdk/v2/guide/testing.html)