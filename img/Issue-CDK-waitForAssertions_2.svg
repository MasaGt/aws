<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background: transparent; background-color: transparent; color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1451px" height="971px" viewBox="-0.5 -0.5 1451 971" content="&lt;mxfile host=&quot;app.diagrams.net&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.6 Safari/605.1.15&quot; version=&quot;28.2.1&quot;&gt;&#10;  &lt;diagram name=&quot;ページ1&quot; id=&quot;NBahCbcPbne-9KdtGcHt&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1923&quot; dy=&quot;2237&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-1&quot; value=&quot;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;30&quot; y=&quot;-10&quot; width=&quot;1450&quot; height=&quot;970&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-5&quot; value=&quot;エラーの原因のイメージ&quot; style=&quot;text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontStyle=1&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;593.75&quot; width=&quot;322.5&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-31&quot; value=&quot;&amp;lt;div style=&amp;quot;font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; color: rgb(255, 255, 255); background-color: rgb(0, 0, 0); font-family: Menlo, Monaco, &amp;amp;quot;Courier New&amp;amp;quot;, monospace; line-height: 18px; white-space: pre;&amp;quot;&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(124, 166, 104);&amp;quot;&amp;gt;//テストコード&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(197, 134, 192);&amp;quot;&amp;gt;import&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(197, 134, 192);&amp;quot;&amp;gt;as&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;cdk&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(197, 134, 192);&amp;quot;&amp;gt;from&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;aws-cdk-lib&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(197, 134, 192);&amp;quot;&amp;gt;import&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; { &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;IntegrationStack&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; } &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(197, 134, 192);&amp;quot;&amp;gt;from&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;../lib/integration-stack&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(197, 134, 192);&amp;quot;&amp;gt;import&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(197, 134, 192);&amp;quot;&amp;gt;as&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;it&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(197, 134, 192);&amp;quot;&amp;gt;from&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;@aws-cdk/integ-tests-alpha&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(124, 166, 104);&amp;quot;&amp;gt;//Step1. 空のAppを作成&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(212, 212, 212);&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;new&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;cdk&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(78, 201, 176);&amp;quot;&amp;gt;App&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;();&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(124, 166, 104);&amp;quot;&amp;gt;//Step2. テスト対象のスタックを生成&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;targetStack&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(212, 212, 212);&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;new&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(78, 201, 176);&amp;quot;&amp;gt;IntegrationStack&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;, &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;MyStack&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;);&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(124, 166, 104);&amp;quot;&amp;gt;//Step3. IntegTestインスタンス (コンストラクトを生成)&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;integTest&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(212, 212, 212);&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;new&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;it&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(78, 201, 176);&amp;quot;&amp;gt;IntegTest&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;, &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;TestStack&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;, {&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;testCases&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; [&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;targetStack&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;] &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(124, 166, 104);&amp;quot;&amp;gt;//testCasesにテスト対象のスタックを指定&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;});&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(124, 166, 104);&amp;quot;&amp;gt;//Step3.5 dynamoに認証用ユーザーの登録&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;userID&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(212, 212, 212);&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;100&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;const&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;putItemCall&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(212, 212, 212);&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;integTest&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;assertions&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(220, 220, 170);&amp;quot;&amp;gt;awsApiCall&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;#39;DynamoDB&amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;, &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;#39;putItem&amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;, {&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;  &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;TableName&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;targetStack&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;userTable&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;  &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;Item&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; {&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;user_id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; { &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;S&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;userID&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; },&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; { &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;S&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;#39;UserA&amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; }&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;  },&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;});&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(124, 166, 104);&amp;quot;&amp;gt;//dynamoへのアクセス権付与&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;putItemCall&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;provider&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(220, 220, 170);&amp;quot;&amp;gt;addToRolePolicy&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;({&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;  &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;Effect&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;#39;Allow&amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;  &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;Action&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; [&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;#39;dynamodb:PutItem&amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;],&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;  &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;Resource&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; [&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;#39;*&amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;],&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;});&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(124, 166, 104);&amp;quot;&amp;gt;//Step4. Lambda関数(/greetingに統合したLambda関数を呼び出す)&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;integTest&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;assertions&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(220, 220, 170);&amp;quot;&amp;gt;httpApiCall&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;`&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;targetStack&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;endpointURL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;?user_id=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;userID&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(86, 156, 214);&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;`&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;, {&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;method&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;GET&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;headers&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; {&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;Auth&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;Allow&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;    },&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;}).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(220, 220, 170);&amp;quot;&amp;gt;expect&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;it&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(78, 201, 176);&amp;quot;&amp;gt;ExpectedResult&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(220, 220, 170);&amp;quot;&amp;gt;objectLike&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;({&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;status&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(181, 206, 168);&amp;quot;&amp;gt;200&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;body&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(156, 220, 254);&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(206, 145, 120);&amp;quot;&amp;gt;&amp;quot;Hello From Lambda&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;}))&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(255, 255, 255);&amp;quot;&amp;gt;;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;whiteSpace=wrap;html=1;fontSize=16;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;60&quot; y=&quot;120&quot; width=&quot;790&quot; height=&quot;780&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-32&quot; value=&quot;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;1000&quot; y=&quot;120&quot; width=&quot;440&quot; height=&quot;420&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-35&quot; value=&quot;&quot; style=&quot;outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.cloud_2;fillColor=#F58534;gradientColor=none;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;1000&quot; y=&quot;120&quot; width=&quot;75&quot; height=&quot;75&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-37&quot; value=&quot;&quot; style=&quot;outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.dynamo_db;fillColor=#2E73B8;gradientColor=none;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;1170&quot; y=&quot;230&quot; width=&quot;115.56&quot; height=&quot;130&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-38&quot; value=&quot;DynamoDB&amp;lt;div&amp;gt;UserTable&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;1090.28&quot; y=&quot;370&quot; width=&quot;275&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-39&quot; value=&quot;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#FF0000;strokeWidth=3;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;60&quot; y=&quot;449&quot; width=&quot;750&quot; height=&quot;130&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-40&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;strokeColor=#FF0000;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=3;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;h2cYxPrW9hI8uODE86Bc-39&quot; target=&quot;h2cYxPrW9hI8uODE86Bc-37&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;690&quot; y=&quot;610&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;740&quot; y=&quot;560&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-41&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;strokeColor=#0000CC;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;h2cYxPrW9hI8uODE86Bc-42&quot; target=&quot;h2cYxPrW9hI8uODE86Bc-38&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1230&quot; y=&quot;699&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1590&quot; y=&quot;480&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-42&quot; value=&quot;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#0000CC;strokeWidth=3;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;60&quot; y=&quot;720&quot; width=&quot;795&quot; height=&quot;180&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;h2cYxPrW9hI8uODE86Bc-43&quot; value=&quot;putItemの結果が反映されるよりも先にカスタムオーソライザーがテーブルを参照しているので、カスタムオーソライザー側の処理にて403で返却された&quot; style=&quot;text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontColor=#0000CC;fontStyle=1&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;900&quot; y=&quot;740&quot; width=&quot;530&quot; height=&quot;100&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs/><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="h2cYxPrW9hI8uODE86Bc-1"><g><rect x="0" y="0" width="1450" height="970" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-5"><g><rect x="563.75" y="10" width="322.5" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 321px; height: 1px; padding-top: 35px; margin-left: 565px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 26px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">エラーの原因のイメージ</div></div></div></foreignObject><text x="725" y="43" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="26px" text-anchor="middle" font-weight="bold">エラーの原因のイメージ</text></switch></g></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-31"><g><rect x="30" y="130" width="790" height="780" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 788px; height: 1px; padding-top: 137px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div style="font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); background-color: light-dark(rgb(0, 0, 0), rgb(237, 237, 237)); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px; white-space: pre;"><div><span style="color: light-dark(rgb(124, 166, 104), rgb(81, 118, 64));">//テストコード</span></div><div><span style="color: light-dark(rgb(197, 134, 192), rgb(146, 92, 142));">import</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">*</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(197, 134, 192), rgb(146, 92, 142));">as</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">cdk</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(197, 134, 192), rgb(146, 92, 142));">from</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"aws-cdk-lib"</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">;</span></div><div><span style="color: light-dark(rgb(197, 134, 192), rgb(146, 92, 142));">import</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> { </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">IntegrationStack</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> } </span><span style="color: light-dark(rgb(197, 134, 192), rgb(146, 92, 142));">from</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"../lib/integration-stack"</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">;</span></div><div><span style="color: light-dark(rgb(197, 134, 192), rgb(146, 92, 142));">import</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">*</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(197, 134, 192), rgb(146, 92, 142));">as</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">it</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(197, 134, 192), rgb(146, 92, 142));">from</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"@aws-cdk/integ-tests-alpha"</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">;</span></div><br /><div><span style="color: light-dark(rgb(124, 166, 104), rgb(81, 118, 64));">//Step1. 空のAppを作成</span></div><div><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">const</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">app</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(212, 212, 212), rgb(55, 55, 55));">=</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">new</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">cdk</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(78, 201, 176), rgb(6, 112, 90));">App</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">();</span></div><br /><div><span style="color: light-dark(rgb(124, 166, 104), rgb(81, 118, 64));">//Step2. テスト対象のスタックを生成</span></div><div><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">const</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">targetStack</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(212, 212, 212), rgb(55, 55, 55));">=</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">new</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(78, 201, 176), rgb(6, 112, 90));">IntegrationStack</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">(</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">app</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">, </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"MyStack"</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">);</span></div><br /><div><span style="color: light-dark(rgb(124, 166, 104), rgb(81, 118, 64));">//Step3. IntegTestインスタンス (コンストラクトを生成)</span></div><div><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">const</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">integTest</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(212, 212, 212), rgb(55, 55, 55));">=</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">new</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">it</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(78, 201, 176), rgb(6, 112, 90));">IntegTest</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">(</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">app</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">, </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"TestStack"</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">, {</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">    </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">testCases</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> [</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">targetStack</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">] </span><span style="color: light-dark(rgb(124, 166, 104), rgb(81, 118, 64));">//testCasesにテスト対象のスタックを指定</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">});</span></div><br /><div><span style="color: light-dark(rgb(124, 166, 104), rgb(81, 118, 64));">//Step3.5 dynamoに認証用ユーザーの登録</span></div><div><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">const</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">userID</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(212, 212, 212), rgb(55, 55, 55));">=</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"100"</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">;</span></div><div><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">const</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">putItemCall</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(212, 212, 212), rgb(55, 55, 55));">=</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">integTest</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">assertions</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(220, 220, 170), rgb(54, 54, 11));">awsApiCall</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">(</span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">'DynamoDB'</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">, </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">'putItem'</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">, {</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">  </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">TableName</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">targetStack</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">userTable</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">,</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">  </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">Item</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> {</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">    </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">user_id</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> { </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">S</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">userID</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> },</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">    </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">name</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> { </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">S</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">'UserA'</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> }</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">  },</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">});</span></div><br /><div><span style="color: light-dark(rgb(124, 166, 104), rgb(81, 118, 64));">//dynamoへのアクセス権付与</span></div><div><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">putItemCall</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">provider</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(220, 220, 170), rgb(54, 54, 11));">addToRolePolicy</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">({</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">  </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">Effect</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">'Allow'</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">,</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">  </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">Action</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> [</span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">'dynamodb:PutItem'</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">],</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">  </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">Resource</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> [</span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">'*'</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">],</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">});</span></div><br /><div><span style="color: light-dark(rgb(124, 166, 104), rgb(81, 118, 64));">//Step4. Lambda関数(/greetingに統合したLambda関数を呼び出す)</span></div><div><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">integTest</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">assertions</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(220, 220, 170), rgb(54, 54, 11));">httpApiCall</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">(</span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">`</span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">${</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">targetStack</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">endpointURL</span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">}</span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">?user_id=</span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">${</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">userID</span><span style="color: light-dark(rgb(86, 156, 214), rgb(61, 121, 171));">}</span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">`</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">, {</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">    </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">method</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"GET"</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">,</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">    </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">headers</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> {</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">        </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"Auth"</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"Allow"</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">    },</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">}).</span><span style="color: light-dark(rgb(220, 220, 170), rgb(54, 54, 11));">expect</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">(</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">it</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(78, 201, 176), rgb(6, 112, 90));">ExpectedResult</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">.</span><span style="color: light-dark(rgb(220, 220, 170), rgb(54, 54, 11));">objectLike</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">({</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">    </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">status</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(181, 206, 168), rgb(53, 74, 41));">200</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">,</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">    </span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">body</span><span style="color: light-dark(rgb(156, 220, 254), rgb(12, 67, 96));">:</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"> </span><span style="color: light-dark(rgb(206, 145, 120), rgb(145, 93, 71));">"Hello From Lambda"</span></div><div><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">}))</span><span style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">;</span></div></div></div></div></div></foreignObject><text x="32" y="153" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="16px">//テストコード...</text></switch></g></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-32"><g><rect x="970" y="130" width="440" height="420" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-35"><g><rect x="970" y="130" width="75" height="75" fill="#f58534" stroke="none" pointer-events="all" style="fill: light-dark(rgb(245, 133, 52), rgb(189, 92, 23));"/><path d="M 1030.96 175 C 1030.21 174.04 1026.14 174.57 1024.32 174.79 C 1023.79 174.89 1023.68 174.36 1024.21 174.04 C 1027.54 171.79 1032.89 172.43 1033.43 173.18 C 1034.07 173.93 1033.21 179.29 1030.21 181.86 C 1029.79 182.29 1029.25 182.07 1029.46 181.54 C 1030.21 179.82 1031.71 175.96 1030.96 175 Z M 1028.61 177.68 C 1022.93 181.86 1014.57 184.11 1007.5 184.11 C 997.54 184.11 988.43 180.36 981.68 174.25 C 981.14 173.71 981.57 173.07 982.21 173.5 C 989.61 177.79 998.71 180.36 1008.04 180.36 C 1014.36 180.36 1021.32 179.07 1027.75 176.29 C 1028.71 175.96 1029.57 177.04 1028.61 177.68 Z M 996.14 164.29 C 996.14 164.93 996.25 165.46 996.36 165.79 C 996.46 166.21 996.68 166.54 996.89 167.07 C 997 167.18 997 167.39 997 167.5 C 997 167.71 996.89 167.82 996.68 168.04 L 995.61 168.79 C 995.39 168.89 995.29 168.89 995.18 168.89 C 994.96 168.89 994.86 168.79 994.64 168.68 C 994.43 168.46 994.21 168.14 994 167.82 C 993.79 167.5 993.68 167.18 993.46 166.75 C 992.07 168.36 990.36 169.11 988.32 169.11 C 986.82 169.11 985.75 168.68 984.89 167.82 C 984.04 166.96 983.61 165.89 983.61 164.5 C 983.61 163 984.14 161.82 985.21 160.96 C 986.29 160.11 987.68 159.57 989.5 159.57 C 990.04 159.57 990.68 159.57 991.32 159.68 C 991.96 159.79 992.61 159.89 993.36 160.11 L 993.36 158.93 C 993.36 157.64 993.04 156.68 992.5 156.14 C 991.96 155.61 991 155.29 989.71 155.29 C 989.07 155.29 988.54 155.39 987.89 155.5 C 987.25 155.61 986.61 155.82 986.07 156.14 C 985.75 156.25 985.54 156.36 985.43 156.36 C 985.32 156.36 985.21 156.36 985.11 156.36 C 984.89 156.36 984.79 156.14 984.79 155.82 L 984.79 154.96 C 984.79 154.64 984.79 154.43 984.89 154.32 C 985 154.21 985.11 154.11 985.43 154 C 986.07 153.68 986.71 153.46 987.57 153.25 C 988.43 153.04 989.29 152.93 990.25 152.93 C 992.29 152.93 993.79 153.36 994.75 154.32 C 995.71 155.29 996.14 156.68 996.14 158.61 L 996.14 164.29 Z M 989.07 166.96 C 989.61 166.96 990.25 166.86 990.89 166.64 C 991.54 166.43 992.07 166.11 992.5 165.57 C 992.82 165.25 992.93 164.93 993.14 164.5 C 993.25 164.07 993.36 163.54 993.36 163 L 993.36 162.14 C 992.82 162.04 992.29 161.93 991.75 161.82 C 991.21 161.71 990.68 161.71 990.14 161.71 C 988.96 161.71 988.11 161.93 987.57 162.46 C 987.04 162.89 986.71 163.64 986.71 164.5 C 986.71 165.36 986.93 165.89 987.36 166.32 C 987.68 166.75 988.21 166.96 989.07 166.96 Z M 1003 168.79 C 1002.68 168.79 1002.46 168.68 1002.36 168.57 C 1002.25 168.46 1002.14 168.25 1002.04 167.93 L 997.86 154.54 C 997.75 154.21 997.75 154 997.75 153.79 C 997.75 153.46 997.86 153.36 998.18 153.36 L 999.89 153.36 C 1000.21 153.36 1000.43 153.46 1000.54 153.57 C 1000.64 153.68 1000.75 153.89 1000.86 154.21 L 1003.75 165.68 L 1006.43 154.21 C 1006.54 153.89 1006.64 153.68 1006.75 153.57 C 1006.86 153.46 1007.07 153.36 1007.5 153.36 L 1008.89 153.36 C 1009.21 153.36 1009.43 153.46 1009.64 153.57 C 1009.75 153.68 1009.86 153.89 1009.96 154.21 L 1012.75 165.89 L 1015.75 154.21 C 1015.86 153.89 1015.96 153.68 1016.07 153.57 C 1016.18 153.46 1016.39 153.36 1016.71 153.36 L 1018.32 153.36 C 1018.64 153.36 1018.75 153.46 1018.75 153.79 C 1018.75 153.89 1018.75 154 1018.75 154.11 C 1018.75 154.21 1018.64 154.32 1018.64 154.54 L 1014.46 167.93 C 1014.36 168.25 1014.25 168.46 1014.14 168.57 C 1014.04 168.68 1013.82 168.79 1013.5 168.79 L 1012 168.79 C 1011.68 168.79 1011.46 168.68 1011.25 168.57 C 1011.14 168.46 1011.04 168.25 1010.93 167.82 L 1008.25 156.79 L 1005.57 167.93 C 1005.46 168.25 1005.36 168.46 1005.25 168.68 C 1005.14 168.79 1004.82 168.89 1004.5 168.89 L 1003 168.89 Z M 1025.29 169.32 C 1024.32 169.32 1023.46 169.21 1022.61 169 C 1021.75 168.79 1021.11 168.57 1020.57 168.25 C 1020.25 168.04 1020.14 167.93 1020.04 167.71 C 1019.93 167.5 1019.93 167.39 1019.93 167.18 L 1019.93 166.43 C 1019.93 166.11 1020.04 165.89 1020.36 165.89 C 1020.46 165.89 1020.57 165.89 1020.68 166 C 1020.79 166 1020.89 166.11 1021.11 166.21 C 1021.64 166.43 1022.29 166.64 1023.04 166.86 C 1023.68 166.96 1024.43 167.07 1025.07 167.07 C 1026.14 167.07 1027 166.86 1027.64 166.54 C 1028.29 166.11 1028.5 165.57 1028.5 164.93 C 1028.5 164.39 1028.39 164.07 1028.07 163.75 C 1027.75 163.43 1027.21 163.11 1026.36 162.79 L 1023.79 162.04 C 1022.5 161.61 1021.54 161.07 1021 160.32 C 1020.46 159.57 1020.14 158.71 1020.14 157.75 C 1020.14 157 1020.25 156.36 1020.57 155.82 C 1020.89 155.29 1021.32 154.75 1021.86 154.43 C 1022.39 154 1022.93 153.79 1023.68 153.57 C 1024.32 153.36 1025.07 153.25 1025.82 153.25 C 1026.25 153.25 1026.57 153.25 1027 153.36 C 1027.43 153.36 1027.75 153.46 1028.07 153.57 C 1028.39 153.68 1028.71 153.79 1029.04 153.89 C 1029.36 154 1029.57 154.11 1029.79 154.21 C 1030 154.32 1030.21 154.54 1030.32 154.64 C 1030.43 154.75 1030.43 154.96 1030.43 155.18 L 1030.43 156.04 C 1030.43 156.36 1030.32 156.57 1030 156.57 C 1029.89 156.57 1029.68 156.46 1029.36 156.36 C 1028.39 155.93 1027.21 155.71 1026.04 155.71 C 1025.07 155.71 1024.32 155.93 1023.68 156.25 C 1023.14 156.57 1022.82 157.11 1022.82 157.75 C 1022.82 158.29 1023.04 158.61 1023.36 158.93 C 1023.68 159.25 1024.32 159.57 1025.29 159.89 L 1027.75 160.64 C 1029.04 161.07 1029.89 161.61 1030.43 162.36 C 1030.96 163.11 1031.29 163.86 1031.29 164.82 C 1031.29 165.57 1031.18 166.21 1030.86 166.86 C 1030.54 167.5 1030.11 167.93 1029.57 168.36 C 1029.04 168.79 1028.39 169.11 1027.64 169.32 C 1027 169.21 1026.25 169.32 1025.29 169.32 Z" fill="#ffffff" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-37"><g><path d="M 1178.87 370 L 1152.7 357.17 L 1140 341.28 L 1140 327.57 L 1143.63 327.2 L 1143.63 323.76 L 1140 321.6 L 1140 307.88 L 1143.63 307.88 L 1143.63 302.1 L 1140 302.1 L 1140 288.4 L 1143.63 286.21 L 1143.63 282.8 L 1140 282.41 L 1140 268.69 L 1152.7 252.81 L 1178.87 240 L 1215.11 240 L 1241.05 252.81 L 1255.56 268.69 L 1255.56 282.41 L 1250.67 282.77 L 1250.67 286.02 L 1255.56 288.55 L 1255.56 302.1 L 1250.67 302.1 L 1250.67 307.88 L 1255.56 307.88 L 1255.56 321.79 L 1250.67 324.12 L 1250.67 327.2 L 1255.56 327.57 L 1255.56 341.28 L 1241.05 357.17 L 1215.11 370 Z" fill="#2e73b8" stroke="none" pointer-events="all" style="fill: light-dark(rgb(46, 115, 184), rgb(95, 155, 214));"/><path d="M 1178.87 264 L 1152.7 272.69 L 1152.7 252.81 L 1178.87 240 Z M 1178.87 300.1 L 1152.7 300.82 L 1152.7 281.04 L 1178.87 274.83 Z M 1178.87 334.43 L 1152.7 328.62 L 1152.7 309.15 L 1178.87 310.96 Z M 1178.87 370 L 1152.7 357.17 L 1152.7 337.29 L 1178.87 345.26 Z" fill-opacity="0.3" fill="#000000" stroke="none" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237));"/><path d="M 1255.56 327.57 L 1241.05 337.31 L 1215.11 345.26 L 1178.87 345.26 L 1152.7 337.29 L 1152.7 357.17 L 1140 341.28 L 1140 327.57 L 1143.63 327.2 L 1143.63 323.76 L 1140 321.6 L 1140 307.88 L 1143.63 307.88 L 1143.63 302.1 L 1140 302.1 L 1140 288.4 L 1143.63 286.21 L 1143.63 282.8 L 1140 282.41 L 1140 268.69 L 1152.7 252.81 L 1152.7 272.69 L 1178.87 264 L 1215.11 264 L 1241.05 272.33 L 1255.56 282.41 L 1250.67 282.77 L 1250.67 286.02 L 1241.05 280.97 L 1215.11 274.83 L 1178.87 274.83 L 1152.7 281.04 L 1152.7 300.82 L 1178.87 300.1 L 1215.11 300.1 L 1241.05 301.02 L 1255.56 302.1 L 1250.67 302.1 L 1250.67 307.88 L 1255.56 307.88 L 1241.05 309.15 L 1215.11 310.96 L 1178.87 310.96 L 1152.7 309.15 L 1152.7 328.62 L 1178.87 334.43 L 1215.11 334.43 L 1241.05 328.82 L 1250.67 324.12 L 1250.67 327.2 Z" fill-opacity="0.5" fill="#000000" stroke="none" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237));"/><path d="M 1215.11 264 L 1215.11 240 L 1241.05 252.81 L 1241.05 272.33 Z" fill-opacity="0.3" fill="#ffffff" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/><path d="M 1215.11 274.83 L 1241.05 280.97 L 1241.05 301.02 L 1215.11 300.1 Z" fill-opacity="0.3" fill="#ffffff" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/><path d="M 1215.11 310.96 L 1241.05 309.15 L 1241.05 328.82 L 1215.11 334.43 Z" fill-opacity="0.3" fill="#ffffff" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/><path d="M 1215.11 345.26 L 1241.05 337.31 L 1241.05 357.17 L 1215.11 370 Z" fill-opacity="0.3" fill="#ffffff" stroke="none" pointer-events="all" style="fill: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));"/></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-38"><g><rect x="1060.28" y="380" width="275" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 273px; height: 1px; padding-top: 405px; margin-left: 1061px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 22px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DynamoDB<div>UserTable</div></div></div></div></foreignObject><text x="1198" y="412" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="22px" text-anchor="middle">DynamoDB...</text></switch></g></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-39"><g><rect x="30" y="459" width="750" height="130" fill="none" stroke="#ff0000" stroke-width="3" pointer-events="all" style="stroke: light-dark(rgb(255, 0, 0), rgb(255, 144, 144));"/></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-40"><g><path d="M 780 524 L 1131.37 310.25" fill="none" stroke="#ff0000" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(255, 0, 0), rgb(255, 144, 144));"/><path d="M 1137.13 306.74 L 1131.78 315.27 L 1131.37 310.25 L 1127.11 307.58 Z" fill="#ff0000" stroke="#ff0000" stroke-width="3" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(255, 0, 0), rgb(255, 144, 144)); stroke: light-dark(rgb(255, 0, 0), rgb(255, 144, 144));"/></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-41"><g><path d="M 825 820 L 1192.09 435.95" fill="none" stroke="#0000cc" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 204), rgb(212, 212, 255));"/><path d="M 1196.23 431.62 L 1193.6 440.16 L 1192.09 435.95 L 1187.82 434.64 Z" fill="#0000cc" stroke="#0000cc" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 204), rgb(212, 212, 255)); stroke: light-dark(rgb(0, 0, 204), rgb(212, 212, 255));"/></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-42"><g><rect x="30" y="730" width="795" height="180" fill="none" stroke="#0000cc" stroke-width="3" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 204), rgb(212, 212, 255));"/></g></g><g data-cell-id="h2cYxPrW9hI8uODE86Bc-43"><g><rect x="870" y="750" width="530" height="100" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 528px; height: 1px; padding-top: 800px; margin-left: 871px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #0000CC; "><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: light-dark(#0000CC, #d4d4ff); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">putItemの結果が反映されるよりも先にカスタムオーソライザーがテーブルを参照しているので、カスタムオーソライザー側の処理にて403で返却された</div></div></div></foreignObject><text x="1135" y="806" fill="#0000CC" font-family="Helvetica" font-size="20px" text-anchor="middle" font-weight="bold">putItemの結果が反映されるよりも先にカスタムオーソライザーがテーブルを参照しているので、カスタムオーソライザー側の処理にて403で返却された</text></switch></g></g></g></g></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>